import{j as _,B as P,a as h,L as D,i as de,F as fe,f as he,P as pe,H as me,b as Z,k as ve,l as we,S as be,X as ge,m as ye,D as ee,T as ne,e as _e}from"./vendor-0233c3b5.js";function K(e,r){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},K(e,r)}function Re(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,K(e,r)}const H=window.React;var ke=function(r,t){return r===void 0&&(r=[]),t===void 0&&(t=[]),r.length!==t.length||r.some(function(o,a){return!Object.is(o,t[a])})},te={error:null},Ee=function(e){Re(r,e);function r(){for(var o,a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return o=e.call.apply(e,[this].concat(l))||this,o.state=te,o.resetErrorBoundary=function(){for(var m,d=arguments.length,c=new Array(d),p=0;p<d;p++)c[p]=arguments[p];o.props.onReset==null||(m=o.props).onReset.apply(m,c),o.reset()},o}r.getDerivedStateFromError=function(a){return{error:a}};var t=r.prototype;return t.reset=function(){this.setState(te)},t.componentDidCatch=function(a,l){var u,m;(u=(m=this.props).onError)==null||u.call(m,a,l)},t.componentDidUpdate=function(a,l){var u=this.state.error,m=this.props.resetKeys;if(u!==null&&l.error!==null&&ke(a.resetKeys,m)){var d,c;(d=(c=this.props).onResetKeysChange)==null||d.call(c,a.resetKeys,m),this.reset()}},t.render=function(){var a=this.state.error,l=this.props,u=l.fallbackRender,m=l.FallbackComponent,d=l.fallback;if(a!==null){var c={error:a,resetErrorBoundary:this.resetErrorBoundary};if(H.isValidElement(d))return d;if(typeof u=="function")return u(c);if(m)return H.createElement(m,c);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(H.Component),$={exports:{}},oe={};(function(e){function r(n,i){var s=n.length;n.push(i);e:for(;0<s;){var f=s-1>>>1,b=n[f];if(0<a(b,i))n[f]=i,n[s]=b,s=f;else break e}}function t(n){return n.length===0?null:n[0]}function o(n){if(n.length===0)return null;var i=n[0],s=n.pop();if(s!==i){n[0]=s;e:for(var f=0,b=n.length,T=b>>>1;f<T;){var k=2*(f+1)-1,z=n[k],E=k+1,C=n[E];if(0>a(z,s))E<b&&0>a(C,z)?(n[f]=C,n[E]=s,f=E):(n[f]=z,n[k]=s,f=k);else if(E<b&&0>a(C,s))n[f]=C,n[E]=s,f=E;else break e}}return i}function a(n,i){var s=n.sortIndex-i.sortIndex;return s!==0?s:n.id-i.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();e.unstable_now=function(){return u.now()-m}}var d=[],c=[],p=1,v=null,w=3,R=!1,g=!1,y=!1,I=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(n){for(var i=t(c);i!==null;){if(i.callback===null)o(c);else if(i.startTime<=n)o(c),i.sortIndex=i.expirationTime,r(d,i);else break;i=t(c)}}function M(n){if(y=!1,L(n),!g)if(t(d)!==null)g=!0,U(A);else{var i=t(c);i!==null&&q(M,i.startTime-n)}}function A(n,i){g=!1,y&&(y=!1,V(O),O=-1),R=!0;var s=w;try{for(L(i),v=t(d);v!==null&&(!(v.expirationTime>i)||n&&!J());){var f=v.callback;if(typeof f=="function"){v.callback=null,w=v.priorityLevel;var b=f(v.expirationTime<=i);i=e.unstable_now(),typeof b=="function"?v.callback=b:v===t(d)&&o(d),L(i)}else o(d);v=t(d)}if(v!==null)var T=!0;else{var k=t(c);k!==null&&q(M,k.startTime-i),T=!1}return T}finally{v=null,w=s,R=!1}}var j=!1,x=null,O=-1,X=5,Y=-1;function J(){return!(e.unstable_now()-Y<X)}function N(){if(x!==null){var n=e.unstable_now();Y=n;var i=!0;try{i=x(!0,n)}finally{i?S():(j=!1,x=null)}}else j=!1}var S;if(typeof G=="function")S=function(){G(N)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ue=Q.port2;Q.port1.onmessage=N,S=function(){ue.postMessage(null)}}else S=function(){I(N,0)};function U(n){x=n,j||(j=!0,S())}function q(n,i){O=I(function(){n(e.unstable_now())},i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(n){n.callback=null},e.unstable_continueExecution=function(){g||R||(g=!0,U(A))},e.unstable_forceFrameRate=function(n){0>n||125<n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<n?Math.floor(1e3/n):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return t(d)},e.unstable_next=function(n){switch(w){case 1:case 2:case 3:var i=3;break;default:i=w}var s=w;w=i;try{return n()}finally{w=s}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(n,i){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var s=w;w=n;try{return i()}finally{w=s}},e.unstable_scheduleCallback=function(n,i,s){var f=e.unstable_now();switch(typeof s=="object"&&s!==null?(s=s.delay,s=typeof s=="number"&&0<s?f+s:f):s=f,n){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=s+b,n={id:p++,callback:i,priorityLevel:n,startTime:s,expirationTime:b,sortIndex:-1},s>f?(n.sortIndex=s,r(c,n),t(d)===null&&n===t(c)&&(y?(V(O),O=-1):y=!0,q(M,s-f))):(n.sortIndex=b,r(d,n),g||R||(g=!0,U(A))),n},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(n){var i=w;return function(){var s=w;w=i;try{return n.apply(this,arguments)}finally{w=s}}}})(oe);(function(e){e.exports=oe})($);const Pe=window.React.createContext,ie=window.React.useContext,Ie=window.React.useReducer,Oe=window.React.createElement,Se=window.React.useEffect,Fe=window.React.useLayoutEffect,W=window.React.useRef,je=window.React.useState,xe=window.ReactDOM.unstable_batchedUpdates,F=Symbol(),Te=Symbol(),ae=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?Se:Fe,Ce=$.exports.unstable_runWithPriority?e=>$.exports.unstable_runWithPriority($.exports.unstable_NormalPriority,e):e=>e();function De(e){const r=Pe({[F]:{v:{current:e},n:{current:-1},l:new Set,u:o=>o()}});var t;return r[Te]=r.Provider,r.Provider=(t=r.Provider,({value:o,children:a})=>{const l=W(o),u=W(0),[m,d]=je(null);m&&(m(o),d(null));const c=W();if(!c.current){const p=new Set,v=(w,R)=>{xe(()=>{u.current+=1;const g={n:u.current};R!=null&&R.suspense&&(g.n*=-1,g.p=new Promise(y=>{d(()=>I=>{g.v=I,delete g.p,y(I)})})),p.forEach(y=>y(g)),w()})};c.current={[F]:{v:l,n:u,l:p,u:v}}}return ae(()=>{l.current=o,u.current+=1,Ce(()=>{c.current[F].l.forEach(p=>{p({n:u.current,v:o})})})},[o]),Oe(t,{value:c.current},a)}),delete r.Consumer,r}function se(e,r){const t=ie(e)[F],{v:{current:o},n:{current:a},l}=t,u=r(o),[m,d]=Ie((c,p)=>{if(!p)return[o,u];if("p"in p)throw p.p;if(p.n===a)return Object.is(c[1],u)?c:[o,u];try{if("v"in p){if(Object.is(c[0],p.v))return c;const v=r(p.v);return Object.is(c[1],v)?c:[p.v,v]}}catch{}return[...c]},[o,u]);return Object.is(m[1],u)||d(),ae(()=>(l.add(d),()=>{l.delete(d)}),[l]),m[1]}function $e(e){const r=ie(e)[F],{u:t}=r;return t}const Be=window.React.createElement,Le=window.React.useState,re=window.React.useCallback,le=(e,r)=>{const t={input:r};return t.promise=new Promise((o,a)=>{e(r).then(l=>{t.result=l,o()}).catch(l=>{t.error=l,a(l)}).finally(()=>{delete t.promise})}),t},B=De(null),Me=({initialInputs:e,children:r})=>Be(B.Provider,{value:Le(()=>{const t=new Map;if(e)for(const[o,a]of e)t.set(o,le(o,a));return t})},r);function Ae(e){const r=(t=>{const o=$e(B),a=se(B,l=>l?l[1]:"NO_PROVIDER");if(a==="NO_PROVIDER")throw new Error("missing Provider");return re(l=>{o(()=>{a(u=>new Map(u).set(t,l))},{suspense:!0})},[o,a,t])})(e);return re(t=>{r(le(e,t))},[r,e])}function Ne(e,r){let t=(o=>{const a=se(B,l=>l?l[0].get(o):"NO_PROVIDER");if(a==="NO_PROVIDER")throw new Error("missing Provider");return a})(e);if(!t&&r!=null&&r.allowUndefined&&(t={input:void 0}),!t)throw new Error("missing initial input");if("promise"in t)throw t.promise;if("error"in t)throw t.error;return{input:t.input,result:t.result,refetch:Ae(e)}}const Ue=window.React.memo,qe=({name:e,link:r,logo:t,slogan:o="",...a})=>_(P,{display:"flex",alignItems:"center",borderWidth:"1px",borderStyle:"solid",borderColor:"border.default",borderRadius:2,maxHeight:"64px",overflow:"hidden",...a,children:[h(P,{flexBasis:"auto",flexShrink:0,flexGrow:0,height:"64px",width:"64px",overflow:"hidden",children:h("img",{loading:"lazy",decoding:"async",width:64,height:64,style:{objectFit:"cover"},src:new URL(t,"https://sb.cdn.baoshuo.ren/friends/img/").toString()})}),_(P,{padding:2,overflow:"hidden",children:[h(D,{href:r,target:"_blank",sx:{fontWeight:"bold"},children:e}),o&&h(de,{as:"p",title:o,sx:{fontSize:1,marginTop:1,marginBottom:0,color:"fg.muted",width:"100%",maxWidth:"100%"},children:o})]})]}),ze=Ue(qe),He=window.React.memo,We=window.React.Suspense,Ke=window.React.useRef,Ve=window.React.useState,Ge="https://friends.baoshuo.ren/links.json",ce=e=>fetch(Ge).then(r=>r.json()),Xe=()=>{const{result:e}=Ne(ce);return h(P,{display:"grid",gridTemplateColumns:[,,"1fr 1fr"],gridGap:3,children:e.map(r=>h(ze,{...r},r.name))})},Ye=()=>{const[e,r]=Ve(!1),t=Ke(null);return _(fe,{children:[h(he,{children:h("title",{children:"Friends"})}),_(pe.Content,{padding:"none",children:[_(P,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[h(me,{as:"h1",sx:{marginBottom:3},children:"Friends"}),h(Z,{leadingIcon:ve,size:"small",ref:t,onClick:()=>r(!0),children:"Add Your Site"})]}),h(Me,{initialInputs:[[ce,""]],children:h(Ee,{fallback:_(we,{variant:"danger",children:[h(be,{icon:ge,size:18}),"Error when loading friend links, please"," ",h(D,{as:"button",onClick:()=>window.location.reload(),children:"refresh"})," ","and try again."]}),children:h(We,{fallback:h(ye,{}),children:h(Xe,{})})})})]}),e&&_(ee,{returnFocusRef:t,isOpen:e,onDismiss:()=>r(!1),"aria-labelledby":"header-id",children:[h(ee.Header,{children:"Add your site to this page"}),_(P,{p:3,children:[_(ne,{as:"p",marginTop:0,marginBottom:2,children:["Before adding your site to this page, please read the requirements at"," ",h(D,{href:"https://github.com/renbaoshuo/Friends",target:"_blank",children:"renbaoshuo/Friends"})," ","first."]}),h(ne,{as:"p",marginTop:0,marginBottom:3,children:"If your site meets every requirement, you can submit your site's info following the provided steps!"}),h(Z,{as:D,href:"https://github.com/renbaoshuo/Friends",target:"_blank",sx:{display:"block",":hover":{textDecoration:"none"}},leadingIcon:_e,children:"renbaoshuo/Friends"})]})]})]})},Je=He(Ye),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"})),Ze={};Ze.main=Qe;export{Ze as default};
